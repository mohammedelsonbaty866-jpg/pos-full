<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>POS + ØªÙ‚Ø§Ø±ÙŠØ±</title>
  <style>
    body {
      font-family: Arial;
      background: #f2f2f2;
      padding: 20px;
      direction: rtl;
    }
    .pos {
      background: #fff;
      padding: 20px;
      max-width: 450px;
      margin: auto;
      border-radius: 8px;
      margin-bottom: 20px;
    }
    select, input, button {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
    }
    ul {
      list-style: none;
      padding: 0;
    }
    li {
      display: flex;
      justify-content: space-between;
      border-bottom: 1px solid #ddd;
      padding: 5px 0;
    }
    .report {
      background: #fff;
      padding: 15px;
      max-width: 450px;
      margin: auto;
      border-radius: 8px;
    }
    .success {
      background: #27ae60;
      color: white;
    }
    .danger {
      background: #c0392b;
      color: white;
    }
  </style>
</head>
<body>

<div class="pos">
  <h2>ğŸ§¾ Ù†Ù‚Ø·Ø© Ø¨ÙŠØ¹</h2>

  <select id="product">
    <option value="10">Ù…ÙŠØ§Ù‡ - 10</option>
    <option value="15">Ø¹ØµÙŠØ± - 15</option>
    <option value="20">Ø´ÙŠÙƒÙˆÙ„Ø§ØªØ© - 20</option>
  </select>

  <input type="number" id="qty" value="1" min="1">

  <button onclick="addItem()">â• Ø¥Ø¶Ø§ÙØ©</button>

  <h3>Ø§Ù„ÙØ§ØªÙˆØ±Ø©</h3>
  <ul id="cart"></ul>

  <input type="number" id="discount" placeholder="Ø®ØµÙ…" value="0">

  <h3>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: <span id="total">0</span> Ø¬Ù†ÙŠÙ‡</h3>

  <button class="success" onclick="finishSale()">âœ… Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø¨ÙŠØ¹</button>
  <button class="danger" onclick="clearCart()">ğŸ—‘ï¸ Ù…Ø³Ø­</button>
</div>

<div class="report">
  <h3>ğŸ“Š ØªÙ‚Ø±ÙŠØ± Ø§Ù„ÙŠÙˆÙ…</h3>
  <p>Ø¹Ø¯Ø¯ Ø§Ù„ÙÙˆØ§ØªÙŠØ±: <span id="salesCount">0</span></p>
  <p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª: <span id="salesTotal">0</span> Ø¬Ù†ÙŠÙ‡</p>
</div>

<script>
  let cart = [];
  let discount = 0;

  let report = JSON.parse(localStorage.getItem("report")) || {
    count: 0,
    total: 0
  };

  function addItem() {
    const product = document.getElementById("product");
    const price = Number(product.value);
    const name = product.options[product.selectedIndex].text;
    const qty = Number(document.getElementById("qty").value);

    cart.push({ name, price, qty });
    render();
  }

  function render() {
    const list = document.getElementById("cart");
    list.innerHTML = "";
    let total = 0;

    cart.forEach((item, i) => {
      const itemTotal = item.price * item.qty;
      total += itemTotal;

      const li = document.createElement("li");
      li.innerHTML = `
        ${item.name} Ã— ${item.qty} = ${itemTotal}
        <button onclick="removeItem(${i})">âŒ</button>
      `;
      list.appendChild(li);
    });

    discount = Number(document.getElementById("discount").value);
    document.getElementById("total").innerText = total - discount;
  }

  function removeItem(i) {
    cart.splice(i, 1);
    render();
  }

  function clearCart() {
    cart = [];
    document.getElementById("discount").value = 0;
    render();
  }

  function finishSale() {
    const total = Number(document.getElementById("total").innerText);
    if (total <= 0) return;

    report.count += 1;
    report.total += total;

    localStorage.setItem("report", JSON.stringify(report));

    clearCart();
    updateReport();
  }

  function updateReport() {
    document.getElementById("salesCount").innerText = report.count;
    document.getElementById("salesTotal").innerText = report.total;
  }

  updateReport();
</script>

</body>
</html>
